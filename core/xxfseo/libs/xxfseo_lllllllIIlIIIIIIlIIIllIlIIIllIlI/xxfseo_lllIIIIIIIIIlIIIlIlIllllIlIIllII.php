<?php
defined('INI_XXFSEO') or exit(); $config=require TEMP_PATH.'config.php'; $URL_ROUTE_RULES=array( '/^(\w{32})\.txt/'=>'plus/verify/check?id=:1', '/^baidu_verify_(\w+)\.html/'=>'plus/verify/check?id=:1', '/^(.*)js\/(\w+)\.script/'=>'plus/ads/index?id=:2', '/sitemap(\d*)\.xml$/'=>'home/'.config('DEFAULT_MODULE').'/sitemap?type=baidu', '/google(\d*)\.xml$/'=>'home/'.config('DEFAULT_MODULE').'/sitemap?type=google', '/sitemap\/google(\d*)\.xml$/'=>'home/'.config('DEFAULT_MODULE').'/sitemap?type=google', '/sitemap\/baidu_mobile(\d*)\.xml$/'=>'home/'.config('DEFAULT_MODULE').'/sitemap?type=baidu_mobile', '/sitemap(\d*)\.txt$/'=>'home/'.config('DEFAULT_MODULE').'/sitemaptxt', '/sitemap(\d*)\.html$/'=>'home/'.config('DEFAULT_MODULE').'/sitemaptxt', '/^robots\.txt$/'=>'home/'.config('DEFAULT_MODULE').'/robots', '/^images\/logo\/(\w+)\.png/'=>'home/'.config('DEFAULT_MODULE').'/logo?n=:1', '/^static\/js\/system\/(.*)\.xxfjs\??(.*)$/'=>'admin/login/sysjs?:1', ); $arctypeconf_file=TEMP_PATH.'arctype_config.php'; $domainconf_file=TEMP_PATH.'domaindb_config.php'; $host=preg_replace('~:\d+$~','',$_SERVER['HTTP_HOST']); if (substr($_SERVER['QUERY_STRING'], 0, 6) != 'admin-' && !preg_match('~/js/system/~',$_SERVER['QUERY_STRING']) && is_file($domainconf_file)){$GLOBALS['domainConfArr']=require $domainconf_file; $GLOBALS['arctypeArr']=require $arctypeconf_file; if($GLOBALS['domainConfArr']){$urlrules=get_domain_conf($host); $urlrules && $URL_ROUTE_RULES=array_merge($URL_ROUTE_RULES,parse_urlrules($urlrules)); } } $urlrule_pic=$GLOBALS['domain_urlrule_pic']; if($urlrule_pic==''){$urlrule_pic='uploads/images/{id}.jpg'; } $urlrule_pic=ltrim($urlrule_pic,'/'); $urlrule_pic=str_replace('{id}','@',$urlrule_pic); $urlrule_pic=preg_quote($urlrule_pic,'/'); $urlrule_pic=str_replace('@','(\d+)',$urlrule_pic); $URL_ROUTE_RULES['/^'.$urlrule_pic.'$/']='home/'.config('DEFAULT_MODULE').'/images?id=:1'; $app_groups='home,admin,plus'; if(strpos($_SERVER['QUERY_STRING'],'@')===false && strpos($_SERVER['QUERY_STRING'],'install')===false){$app_groupArr=explode(',',$app_groups); if(!isset($_GET[config('GROUP_VAR')]) || !in_array($_GET[config('GROUP_VAR')],$app_groupArr)){$URL_ROUTE_RULES['/(.*)/']='home/other/show?id=:1'; } } if(!$config['web_debug']){config('LOG_RECORD',false); } $array=array( 'txtfile'=>array('robot_redirect_data'=>'蜘蛛强引外链'), 'txtdir'=>array('webname'=>'网站名称','tag'=>'TAG','article'=>'文章/信息','pic'=>'图片链接','diy'=>'自定义'), 'txtdir2'=>array('keywords'=>'关键词','link'=>'外链'), 'TMPL_ACTION_ERROR'=>APP_PATH.'static/tips/_jump.html', 'TMPL_ACTION_SUCCESS'=>APP_PATH.'static/tips/_jump.html', 'TMPL_EXCEPTION_FILE'=>APP_PATH.'static/tips/_exception.html', 'DEFAULT_GROUP'=>'home', 'APP_GROUP_LIST'=>$app_groups, 'DB_HASH_LIST'=>'', 'DEFAULT_THEME'=>$config['web_default_theme'], 'URL_MODEL'=>$config['web_url_model'], 'URL_PATH_DEPR'=>'@', 'URL_PATH_SUFFIX'=>$config['web_path_suffix'], 'HTML_CACHE'=>$config['web_caching'], 'URL_ROUTER_ON'=>true, 'TMPL_COMPILE_CHECK'=>(($config['web_debug'] || APP_DEBUG)?true:false), 'ADMIN_ACTION_LOG'=>true, 'HOME_SPAGE_LIST_NUM'=>5, 'HOME_SPAGE_LIST_ADDV'=>1, 'HOME_SPAGE_CONTENT_NUM'=>0, 'COLLECT_LIST_CACHE_TOUCHTIME'=>60*5, 'COLLECT_CONTENT_CACHE_TOUCHTIME'=>60*60, 'URL_ROUTE_RULES'=>$URL_ROUTE_RULES, 'ROBOT_MUST_KEYS'=>array('Baiduspider','Baiduspider-render', 'googlebot','Googlebot-Image','googleOther', '360Spider', 'sogou', 'Yisouspider','Bytespider','bingbot','BingPreview','YandexBot'), 'ROBOT_LIST'=>array( "Bytespider"=>'今日头条', "Baiduspider-render"=>"百度渲染", "Baiduspider"=>"百度", "Googlebot-Image"=>"Google图片", "googlebot"=>"Google", "googleOther"=>'Google其他爬虫', "360Spider"=>"360蜘蛛", "HaoSouSpider"=>"好搜蜘蛛", "Yisouspider"=>"神马", "sogou"=>"搜狗", "bingbot"=>"微软bing", "BingPreview"=>"微软bing渲染", "sosospider"=>"腾讯soso", "Sosoimagespider"=>"soso图片", "yahoo"=>"雅虎", "YandexBot"=>"Yandex", "Exabot"=>"Exabot", "ia_archiver"=>"Alexa", "sohu"=>"搜狐", "sqworm"=>"AOL", "yodaoBot"=>"有道", "iaskspider"=>"新浪爱问", "Scooter"=>"Altavista", "Lycos_Spider"=>"Lycos", "FAST-WebCrawler"=>"Alltheweb", "Slurp"=>"INKTOMI", "Gigabot"=>"gigablast.com", "BSpider"=>"日本蜘蛛", ), ); $zdyfile=DATA_PATH.'robot/zdy.txt'; if(is_file($zdyfile) && $robotzdy=file_get_contents($zdyfile)){$zdyarr=unserialize($robotzdy); foreach($zdyarr as $k=>$vo){$array['ROBOT_LIST'][$vo['mark']]=$vo['name']; if($vo['ismustkey']){$array['ROBOT_MUST_KEYS'][]=$vo['mark']; } } } $query_string=substr($_SERVER['QUERY_STRING'], 0, 9); if(preg_match('~^(?:admin|install)-~i',$query_string)){$array2=array( 'URL_MODEL'=>2, 'URL_PATH_DEPR'=>'-', 'TMPL_COMPILE_CHECK'=>true, 'HTML_CACHE'=>false, 'DEFAULT_THEME'=>'', ); $array=array_merge($array,$array2); } $GLOBALS['domain_suffixs']=array('com','net','wang','vip','tech','online','shop','win','store','red','bid','gs','cx','xin','vc','tm','ltd','date','website','loan','space','ink','kim','group','auto','link','tw','com.tw','sc','lc','us','bz','com.cn','asia','men','gov.cn','org.cn','top','tv','cc','ren','info','biz','mobi','name','hk','com.hk','site  ','net.cn','me','co','com.co','gg','love','ws','pw','in','xyz','org','club','pro','la','lol','cm','top','club','site','online','wang','ltd','lol','vip','shop','store','win','ren','date','red','kim','website','bid','live','sale','run','gold','help','gift','faith','loan','trade','zone','ink','game','party','pub','news','men','vin','fund','wiki','pink','mom','blue','pet','link','space','fit','cool','life','city','webcam','science','accountant','review','download','cricket','racing','taipei','yoga','games','cn.com','wtf','world','works','wine','watch','video','town','tools','today','tips','team','tax','style','studio','sexy','sex','school','press','plus','pics','photo','ooo','band','fyi','money','lawyer','land','media','mba','flowers','love','haus','guru','fish','house','hosting','host','holiday','fans','family','email','domains','dog','diet','design','company','click','chat','ceo','center','cash','cars','cards','car','camera','cafe','cab','black','bike','best','bar','auto','audio','credit','coffee','business','network','auction','show','rip','vet','rent','work','marketmarket','ac.cn','bj.cn','sh.cn','tj.cn','cq.cn','he.cn','sn.cn','sx.cn','nm.cn','ln.cn','jl.cn','hl.cn','js.cn','zj.cn','ah.cn','fj.cn','jx.cn','sd.cn','ha.cn','hb.cn','hn.cn','gd.cn','gx.cn','hi.cn','sc.cn','gz.cn','yn.cn','gs.cn','qh.cn','nx.cn','xj.cn','tw.cn','hk.cn','mo.cn','xz.cn','cn','icu','buzz'); if($config['redis_open'] && substr($_SERVER['QUERY_STRING'], 0, 5) != 'admin') $config['cache_type']='redis'; if(!extension_loaded('redis') ){$config['redis_open']='0'; } return array_merge($config,$array);